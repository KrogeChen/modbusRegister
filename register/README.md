
                                                            
# Modbus寄存器分配表

|Address|Name                     |R/W|Description                                                                                                  |
|       |                         |   |                                                                                                             |
|0x0100 |                         |   |微智能推送数据寄存器                                                                                         |
|       |                         |   |                                                                                                             |
|       |                         |   |                                                                                                             |
|       |                         |   |                                                                                                             |
|       |                         |   |                                                                                                             |
|0x1000 |面板类型(面板)           | W |主要用于LCD面板的通讯,表述显示面板是哪种类型，和0x2000设备类型统一定义                                       |
|0x1001 |软件版本                 | W |版本号，面板软件版本号                                                                                       |
|0x1002 |设备状态字               | W |设备状态字,Bit0:握手完成,Bit1:板载NTC错误                                                                    |
|0x1003 |键盘值                   | W |16Bit的键盘状态字，1表示有按键按下                                                                           |
|0x1004 |面板板载温度值           | W |二进制，0x00ff 表示：当前主运行测量温度是25.5度,  0xFFFB   0.5摄氏度,INT16S,传感器错误赋值9999               |
|0x1005 |扩展湿度值               | W |二进制，0x0050 表示：扩展板测量湿度是80%                                                                     |
|0x1006 |扩展温度值               | W |二进制，0x00ff 表示：扩展板测量温度是25.5摄氏度,  0xFFFB   0.5摄氏度,INT16S                                  |
|0x1007 |扩展CO2值                | W |二进制，0x0190 表示：扩展板测量CO2值是 400PPM                                                                |
|0x1008 |扩展PM2.5值              | W |二进制，0x0078 表示：扩展板测量PM2.5值是 120ug/m3                                                            |
|       |                         |   |                                                                                                             |
|       |                         |   |                                                                                                             |
|0x1010 |LCD显示内容0             | R |LCD显示数据，24Byte ，以Buffer的形式传输                                                                     |
|0x1011 |LCD显示内容1             | R |                                                                                                             |
|0x1012 |LCD显示内容2             | R |                                                                                                             |
|0x1013 |LCD显示内容3             | R |                                                                                                             |
|0x1014 |LCD显示内容4             | R |                                                                                                             |
|0x1015 |LCD显示内容5             | R |                                                                                                             |
|0x1016 |LCD显示内容6             | R |                                                                                                             |
|0x1017 |LCD显示内容7             | R |                                                                                                             |
|0x1018 |LCD显示内容8             | R |                                                                                                             |
|0x1019 |LCD显示内容9             | R |                                                                                                             |
|0x101A |LCD显示内容10            | R |                                                                                                             |
|0x101B |LCD显示内容11            | R |                                                                                                             |
|       |                         |   |                                                                                                             |
|0x1020 |扩展实时测量字           | R |扩展模式立即测量,Bit0:测量一次PM2.5数据,                                                                     |
|                                                                                                                                                   |
|                                                                                                                                                   |
|0x1400 |                         | R |0x1400  0x147F  WIIFI报文上行缓冲区(256Byte)                                                                 |
|0x147F |                         | R |                                                                                                             |
|                                                                                                                                                   |
|0x1480 |                         | W |0x1480  0x14FF  WIIFI报文下行缓冲区(256Byte)                                                                 |
|0x14FF |                         | W |                                                                                                             |
|       |                         |   |                                                                                                             |

  0x1500  0x15FF  工厂生产寄存器

|Address|Name                     |R/W|Description                                                                                                  |
|       |                         |   |                                                                                                             |
|0x1500 |工厂出厂参数             | W |0x2591 写入这个数据后，控制器参数写入工厂出厂参数，其他数据忽略                                              |
|0x1501 |BOX RFID1                |R/W|按ID1_DI2_ID3组成6Byte的数据                                                                                 |
|       |                         |   |ID1=0x8000,ID2=0x0000,ID3=0x0001则组合后的ID为0x800000000001                                                 |
|0x1502 |BOX RFID2                |R/W|工厂写入用                                                                                                   |
|0x1503 |BOX RFID3                |R/W|                                                                                                             |        
|       |                         |   |                                                                                                             |

  0x1600  0x16FF  产品标识寄存器

|Address|Name                     |R/W|Description                                                                                                  |
|       |                         |   |                                                                                                             |
|0x1600 |写入控制Hi               |R/W|读取为随机数，写入为核对厂家写入密码                                                                         |
|0x1601 |写入控制Lo               |R/W|                                                                                                             |
|0x1602 |密文版本控制             | R |0x0001                                                                                                       |
|0x1603 |状态值                   | R |0xFFFF 标识允许写入 ,0x8888 写入完毕 ,0x0000 不允许写入                                                      |
|0x1604 |编码类型                 |R/W|0x0000 Ascii码                                                                                               |
|0x1605 |标识字节长度             |R/W|内容的字节长度。                                                                                             |
|0x1606 |标识内容                 |R/W|包含序号SN,产品型号                                                                                          |
|       |                         |   |序列号和产品型号以ASCII码的方式存储在机器内部。                                                              |
|###### |标识内容                 |R/W|一种类型的数据以回车(0x0D)和换行(0x0A)为结束符。                                                             |
|       |                         |   |比如SN:    2018071601001,在设备内部存储为 32 30 31 38 30 37 31 36 30 31 30 30 31 0D 0A                       |
|###### |标识内容                 |R/W|  型号:    NET.150,      在设备内部存储为 4E 45 54 2E 31 35 30 0D 0A                                         |
|       |                         |   |                                                                                                             |
|###### |标识内容                 |R/W|                                                                                                             |
|       |                         |   |                                                                                                             |
|0x16FF |标识内容                 |R/W|                                                                                                             |

  0x1700  0x17FF URL寄存器，存储网络URL地址

|Address|Name                     |R/W|Description                                                                                                  |
|       |                         |   |                                                                                                             |
|0x1700 |URL有效字节长度          |R/W|内容的有效字节长度(Byte)                                                                                     |
|0x1701 |URL内容                  |R/W|ASCII码                                                                                                      |
|###### |URL内容                  |R/W|                                                                                                             |
|###### |URL内容                  |R/W|                                                                                                             |
|###### |URL内容                  |R/W|                                                                                                             |
|0x177F |URL内容                  |R/W|                                                                                                             |
|       |                         |   |                                                                                                             |

  0x1800 0x19FF  Bootload寄存器

|Address|Name                     |R/W|Description                                                                                                  |
|       |                         |   |                                                                                                             |
|0x1800 |升级启动字               | W |0x3589，从机接收到0x3589开始进入升级状态(续传),0x3795重新开始(重传)                                          |
|0x1801 |升级方法版本             |R/W|W:从机核对升级方法，                                                                                         |
|       |                         |   |0x0001:第一个升级版本                                                                                        |
|0x1802 |报文总序号               | R |整个升级文件的最大序号值，序号从0x0000开始                                                                   |
|0x1803 |Reserve                  |   |采用0x0000                                                                                                   |
|0x1804 |Reserve                  |   |采用0x0000                                                                                                   |
|0x1805 |CheckSum Hi              |R/W|升级报文校验和，32Bit累加值                                                                                  |
|0x1806 |CheckSum Lo              |R/W|                                                                                                             |
|       |                         |   |                                                                                                             |
|0x1810 |从机升级状态字           | R |Bit0:升级状态,Bit1:升级完成,Bit2:CheckSum 错误,Bit3:固件类型错误，Bit4:报文序号错误，Bit5:其他错误           |
|0x1811 |从机升级序号请求         | R |从机请求当前升级报文的需求序号,序号从0x0000开始请求                                                          |
|0x1812 |硬件类型 Hi              | R |硬件的类型 #define Hardware_Newair2017Relay      0x6d640001   继电器输出新风控制板                           |                                                
|0x1813 |硬件类型 Lo              | R |                                                                                                             |                       
|       |                         |   |                                                                                                             |
|0x187F |升级报文序号             | R |当前升级报文的序号                                                                                           |
|0x1880 |升级报文内容             | R |升级数据[0],合计128byte的升级数据，长度不足采用0xFF补齐                                                      |
|       |                         |   |From 0x1880 To 0x18BF 总共64个寄存器                                                                         |
|###### |升级报文内容             | R |例子:                                                                                                        |
|       |                         |   |BIN文件的内容 50 15 00 20 51 88 00 08 6d 88 20 08 71 88 20 08.....                                           |
|###### |升级报文内容             | R |data[0]=0x50,data[1]=0x15,data[2]=0x00,data[3]=0x20,data[4]=0x51,data[5]=0x88,data[6]=0x00,data[7]=0x08      |
|       |                         |   |data[8]=0x6d,data[9]=0x88,data[10]=0x20,data[11]=0x08,data[12]=0x71,data[13]=0x88,data[14]=0x20,data[15]=0x08|
|###### |升级报文内容             | R |                                                                                                             |
|       |                         |   |校验和Sum= data[0][1][2][3]^0x39ea2e76+data[4][5][6][7]^0x82b453c3+                                          |
|###### |升级报文内容             | R |           data[8][9][10][11]^0x39ea2e76+data[12][13][14][15]^0x82b453c3....                                 |
|       |                         |   |                                                                                                             |
|0x18BF |升级报文内容             | R |      Sum= 0x50150020^0x39ea2e76+0x51880008^0x82b453c3+0x6d882008^0x39ea2e76+0x71882008^0x82b453c3....       |
|0x1900 |STM32F103R8T6加密字 Hi   | R |STM32F103R8T6的WRPR 寄存器的映射                                                                             |
|0x1901 |STM32F103R8T6加密字 Lo   | R |                                                                                                             |
|0x1902 |STM32F103R8T6状态字 Hi   | R |STM32F103R8T6的OBR 寄存器的映射                                                                              |
|0x1903 |STM32F103R8T6状态字 Lo   | R |                                                                                                             |
|0x1904 |STM32F103R8T6擦除        | W |STM32F103R8T6 软件全部擦除(0x7799安全字)                                                                     |
|       |                         |   |                                                                                                             |




























